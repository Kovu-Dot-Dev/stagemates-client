import{c as F,m as j,r as m,t as Ee,j as e,v as ze,w as Q,x as se,P as $,y as B,z as te,D as Je,E as Be,R as $e,F as We,G as qe,H as Ge,J as He,K as Ze,a as Z,C as R,g as _,h as M,b as L,A as E,d as z,e as J,f as N,B as y,u as Ke,L as xe,s as Y,i as ue,M as he,U as V,I as C,l as le,n as oe,o as ce,p as de,q as A,S as Qe}from"./index-By068meg.js";import{u as pe,X as Ye,T as X,A as Ve,C as Xe,U as Ue,M as me,L as b}from"./Textarea-DZxv5NUJ.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ss=F("chevron-right",es);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],U=F("message-circle",ts);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ee=F("plus",as);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=[["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}],["path",{d:"m9 17-5-5 5-5",key:"nvlc11"}]],is=F("reply",ns);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],ls=F("send",rs);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],cs=F("share-2",os),ge=[{id:"1",title:"Sunday Jazz Jam",description:"Relaxed jazz session in downtown. All skill levels welcome! We'll have a piano and drum kit available.",host:j[0],date:"2025-01-19",time:"14:00",location:"Blue Note Cafe",address:"1234 Jazz Street, Seattle, WA 98101",maxParticipants:6,currentParticipants:3,genres:["Jazz","Blues"],skillLevel:"All Levels",type:"open",participants:[j[1],j[2]],setlist:[{id:"s1",title:"Autumn Leaves",artist:"Les Paul",genre:"Jazz",difficulty:"Medium",duration:5,key:"Gm",suggestedBy:"Marcus Williams"},{id:"s2",title:"Blue Bossa",artist:"Kenny Dorham",genre:"Jazz",difficulty:"Medium",duration:6,key:"Cm",suggestedBy:"Alice Johnson"}],neededInstruments:["Bass","Trumpet"],equipment:["Piano","Drum Kit","PA System","Microphones"],price:15,discussion:[{id:"t1",author:j[0],content:"Hey everyone! Excited for this jam — the venue has a Steinway grand piano. Looking forward to hearing everyone’s contributions!",timestamp:"2025-01-18T10:30:00Z",replies:[{id:"r1",author:j[1],content:"Amazing! I'll bring my sax — should I focus on Autumn Leaves or just improvise?",timestamp:"2025-01-18T11:15:00Z"}]},{id:"t2",author:j[2],content:"Quick question: is there good parking around Blue Note Cafe?",timestamp:"2025-01-18T14:20:00Z",replies:[]}]},{id:"2",title:"Rock Band Practice",description:"Looking for a bassist and drummer to complete our indie rock band. We have original songs ready to jam!",host:j[1],date:"2025-01-20",time:"19:00",location:"Rehearsal Space",address:"5678 Music Row, Austin, TX 78701",maxParticipants:4,currentParticipants:2,genres:["Rock","Indie","Alternative"],skillLevel:"Intermediate",type:"open",participants:[j[0],j[2]],setlist:[{id:"s3",title:"Midnight City",artist:"Original",genre:"Indie Rock",difficulty:"Hard",duration:4,key:"Em",suggestedBy:"Sarah Miller"}],neededInstruments:["Bass","Drums"],equipment:["Amplifiers","Microphones"],notes:"We have 3 original songs to work through. Looking for committed musicians for potential band formation.",discussion:[{id:"t3",author:j[1],content:"Hey all, for this session let’s focus on tightening up the chorus of our second song.",timestamp:"2025-01-19T16:00:00Z",replies:[{id:"r2",author:j[2],content:"Got it! I’ll bring my guitar pedalboard so we can experiment with some new tones.",timestamp:"2025-01-19T17:00:00Z"}]},{id:"t4",author:j[0],content:"Do we need to bring our own mics, or will the rehearsal space provide them?",timestamp:"2025-01-19T18:45:00Z",replies:[]}]},{id:"3",title:"Acoustic Songwriting Circle",description:"Bring your original songs or covers! We'll share, collaborate, and maybe create something new together.",host:j[2],date:"2025-01-21",time:"18:30",location:"Community Center",address:"910 Music Valley Dr, Nashville, TN 37214",maxParticipants:8,currentParticipants:5,genres:["Folk","Indie","Country"],skillLevel:"All Levels",type:"open",participants:[j[0],j[1]],setlist:[],neededInstruments:["Banjo","Cajon"],equipment:["Acoustic Amplifier","Microphones"],notes:"Bring your own acoustic instruments. We'll have coffee and snacks available.",discussion:[{id:"t5",author:j[2],content:"Can’t wait to hear what original songs people are bringing! I’ll start with one of my folk ballads.",timestamp:"2025-01-20T12:30:00Z",replies:[{id:"r3",author:j[0],content:"Sounds great! I’ll bring a couple of indie-inspired chord progressions we could jam on.",timestamp:"2025-01-20T13:15:00Z"}]},{id:"t6",author:j[1],content:"Will there be a PA available for vocals, or should we stick to unplugged?",timestamp:"2025-01-20T14:45:00Z",replies:[]}]}],ds=t=>{if(!t)throw new Error("id is required");return ge.find(a=>a.id===t)},ms=(t,a)=>pe({queryKey:["jam",t],queryFn:()=>ds(t),enabled:!!t,...a});var K="Dialog",[je]=ze(K),[xs,k]=je(K),fe=t=>{const{__scopeDialog:a,children:l,open:o,defaultOpen:c,onOpenChange:r,modal:f=!0}=t,u=m.useRef(null),w=m.useRef(null),[s,v]=Ee({prop:o,defaultProp:c??!1,onChange:r,caller:K});return e.jsx(xs,{scope:a,triggerRef:u,contentRef:w,contentId:Q(),titleId:Q(),descriptionId:Q(),open:s,onOpenChange:v,onOpenToggle:m.useCallback(()=>v(S=>!S),[v]),modal:f,children:l})};fe.displayName=K;var ve="DialogTrigger",Ne=m.forwardRef((t,a)=>{const{__scopeDialog:l,...o}=t,c=k(ve,l),r=se(a,c.triggerRef);return e.jsx($.button,{type:"button","aria-haspopup":"dialog","aria-expanded":c.open,"aria-controls":c.contentId,"data-state":ie(c.open),...o,ref:r,onClick:B(t.onClick,c.onOpenToggle)})});Ne.displayName=ve;var ae="DialogPortal",[us,ye]=je(ae,{forceMount:void 0}),we=t=>{const{__scopeDialog:a,forceMount:l,children:o,container:c}=t,r=k(ae,a);return e.jsx(us,{scope:a,forceMount:l,children:m.Children.map(o,f=>e.jsx(te,{present:l||r.open,children:e.jsx(Je,{asChild:!0,container:c,children:f})}))})};we.displayName=ae;var H="DialogOverlay",Ce=m.forwardRef((t,a)=>{const l=ye(H,t.__scopeDialog),{forceMount:o=l.forceMount,...c}=t,r=k(H,t.__scopeDialog);return r.modal?e.jsx(te,{present:o||r.open,children:e.jsx(ps,{...c,ref:a})}):null});Ce.displayName=H;var hs=We("DialogOverlay.RemoveScroll"),ps=m.forwardRef((t,a)=>{const{__scopeDialog:l,...o}=t,c=k(H,l);return e.jsx($e,{as:hs,allowPinchZoom:!0,shards:[c.contentRef],children:e.jsx($.div,{"data-state":ie(c.open),...o,ref:a,style:{pointerEvents:"auto",...o.style}})})}),I="DialogContent",be=m.forwardRef((t,a)=>{const l=ye(I,t.__scopeDialog),{forceMount:o=l.forceMount,...c}=t,r=k(I,t.__scopeDialog);return e.jsx(te,{present:o||r.open,children:r.modal?e.jsx(gs,{...c,ref:a}):e.jsx(js,{...c,ref:a})})});be.displayName=I;var gs=m.forwardRef((t,a)=>{const l=k(I,t.__scopeDialog),o=m.useRef(null),c=se(a,l.contentRef,o);return m.useEffect(()=>{const r=o.current;if(r)return Be(r)},[]),e.jsx(ke,{...t,ref:c,trapFocus:l.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:B(t.onCloseAutoFocus,r=>{r.preventDefault(),l.triggerRef.current?.focus()}),onPointerDownOutside:B(t.onPointerDownOutside,r=>{const f=r.detail.originalEvent,u=f.button===0&&f.ctrlKey===!0;(f.button===2||u)&&r.preventDefault()}),onFocusOutside:B(t.onFocusOutside,r=>r.preventDefault())})}),js=m.forwardRef((t,a)=>{const l=k(I,t.__scopeDialog),o=m.useRef(!1),c=m.useRef(!1);return e.jsx(ke,{...t,ref:a,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:r=>{t.onCloseAutoFocus?.(r),r.defaultPrevented||(o.current||l.triggerRef.current?.focus(),r.preventDefault()),o.current=!1,c.current=!1},onInteractOutside:r=>{t.onInteractOutside?.(r),r.defaultPrevented||(o.current=!0,r.detail.originalEvent.type==="pointerdown"&&(c.current=!0));const f=r.target;l.triggerRef.current?.contains(f)&&r.preventDefault(),r.detail.originalEvent.type==="focusin"&&c.current&&r.preventDefault()}})}),ke=m.forwardRef((t,a)=>{const{__scopeDialog:l,trapFocus:o,onOpenAutoFocus:c,onCloseAutoFocus:r,...f}=t,u=k(I,l),w=m.useRef(null),s=se(a,w);return qe(),e.jsxs(e.Fragment,{children:[e.jsx(Ge,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:c,onUnmountAutoFocus:r,children:e.jsx(He,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":ie(u.open),...f,ref:s,onDismiss:()=>u.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(vs,{titleId:u.titleId}),e.jsx(ys,{contentRef:w,descriptionId:u.descriptionId})]})]})}),ne="DialogTitle",De=m.forwardRef((t,a)=>{const{__scopeDialog:l,...o}=t,c=k(ne,l);return e.jsx($.h2,{id:c.titleId,...o,ref:a})});De.displayName=ne;var Ae="DialogDescription",fs=m.forwardRef((t,a)=>{const{__scopeDialog:l,...o}=t,c=k(Ae,l);return e.jsx($.p,{id:c.descriptionId,...o,ref:a})});fs.displayName=Ae;var Se="DialogClose",Pe=m.forwardRef((t,a)=>{const{__scopeDialog:l,...o}=t,c=k(Se,l);return e.jsx($.button,{type:"button",...o,ref:a,onClick:B(t.onClick,()=>c.onOpenChange(!1))})});Pe.displayName=Se;function ie(t){return t?"open":"closed"}var Re="DialogTitleWarning",[Fs,Ie]=Ze(Re,{contentName:I,titleName:ne,docsSlug:"dialog"}),vs=({titleId:t})=>{const a=Ie(Re),l=`\`${a.contentName}\` requires a \`${a.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${a.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${a.docsSlug}`;return m.useEffect(()=>{t&&(document.getElementById(t)||console.error(l))},[l,t]),null},Ns="DialogDescriptionWarning",ys=({contentRef:t,descriptionId:a})=>{const o=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Ie(Ns).contentName}}.`;return m.useEffect(()=>{const c=t.current?.getAttribute("aria-describedby");a&&c&&(document.getElementById(a)||console.warn(o))},[o,t,a]),null},ws=fe,Cs=Ne,bs=we,ks=Ce,Ds=be,As=De,Ss=Pe;function Te({...t}){return e.jsx(ws,{"data-slot":"dialog",...t})}function _e({...t}){return e.jsx(Cs,{"data-slot":"dialog-trigger",...t})}function Ps({...t}){return e.jsx(bs,{"data-slot":"dialog-portal",...t})}function Rs({className:t,...a}){return e.jsx(ks,{"data-slot":"dialog-overlay",className:Z("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function Me({className:t,children:a,showCloseButton:l=!0,...o}){return e.jsxs(Ps,{"data-slot":"dialog-portal",children:[e.jsx(Rs,{}),e.jsxs(Ds,{"data-slot":"dialog-content",className:Z("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...o,children:[a,l&&e.jsxs(Ss,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[e.jsx(Ye,{}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Le({className:t,...a}){return e.jsx("div",{"data-slot":"dialog-header",className:Z("flex flex-col gap-2 text-center sm:text-left",t),...a})}function Fe({className:t,...a}){return e.jsx(As,{"data-slot":"dialog-title",className:Z("text-lg leading-none font-semibold",t),...a})}function Is({jamId:t,currentUser:a,threads:l,onAddThread:o,onAddReply:c,isHost:r,isParticipant:f}){const[u,w]=m.useState(""),[s,v]=m.useState({}),[S,P]=m.useState(null),h=r||f,D=()=>{u.trim()&&h&&(o(u.trim()),w(""))},n=d=>{const g=s[d];g?.trim()&&h&&(c(d,g.trim()),v(T=>({...T,[d]:""})),P(null))},x=d=>{const g=new Date(d),W=new Date().getTime()-g.getTime(),O=Math.floor(W/(1e3*60*60)),q=Math.floor(O/24);if(q>0)return`${q}d ago`;if(O>0)return`${O}h ago`;{const G=Math.floor(W/6e4);return G>0?`${G}m ago`:"Just now"}};return e.jsxs(R,{children:[e.jsxs(_,{children:[e.jsxs(M,{className:"flex items-center space-x-2",children:[e.jsx(U,{className:"w-5 h-5"}),e.jsxs("span",{children:["Discussion (",l.length,")"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Open discussion for all participants - ask questions, share updates, and coordinate details"})]}),e.jsxs(L,{className:"space-y-6",children:[h&&e.jsxs("div",{className:"space-y-3 p-4 bg-muted/30 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(E,{className:"w-8 h-8",children:[e.jsx(z,{src:a.image}),e.jsx(J,{children:a.name.charAt(0)})]}),e.jsx("span",{className:"font-medium",children:a.name}),r&&e.jsx(N,{variant:"default",className:"text-xs",children:"Host"})]}),e.jsx(X,{value:u,onChange:d=>w(d.target.value),placeholder:"Start a discussion, ask a question, or share an update...",rows:3}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(y,{onClick:D,disabled:!u.trim(),size:"sm",children:[e.jsx(ls,{className:"w-4 h-4 mr-2"}),"Post"]})})]}),!h&&e.jsx("div",{className:"p-4 bg-muted/30 rounded-lg text-center",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Join this jam session to participate in the discussion"})}),e.jsx("div",{className:"space-y-6",children:l.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(U,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No discussions yet"}),e.jsx("p",{className:"text-sm",children:"Be the first to start a conversation!"})]}):l.map(d=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs(E,{className:"w-10 h-10",children:[e.jsx(z,{src:d.author.image}),e.jsx(J,{children:d.author.name.charAt(0)})]}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium",children:d.author.name}),d.author.id===a.id&&e.jsx(N,{variant:"outline",className:"text-xs",children:"You"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:x(d.timestamp)})]}),e.jsx("div",{className:"bg-muted/50 rounded-lg p-3",children:e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:d.content})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[h&&e.jsxs(y,{variant:"ghost",size:"sm",onClick:()=>P(S===d.id?null:d.id),children:[e.jsx(is,{className:"w-4 h-4 mr-1"}),"Reply"]}),d.replies.length>0&&e.jsxs("span",{className:"text-sm text-muted-foreground",children:[d.replies.length," ",d.replies.length===1?"reply":"replies"]})]})]})]}),d.replies.length>0&&e.jsx("div",{className:"ml-13 space-y-3 border-l-2 border-muted pl-4",children:d.replies.map(g=>e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs(E,{className:"w-8 h-8",children:[e.jsx(z,{src:g.author.image}),e.jsx(J,{children:g.author.name.charAt(0)})]}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium",children:g.author.name}),g.author.id===a.id&&e.jsx(N,{variant:"outline",className:"text-xs",children:"You"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:x(g.timestamp)})]}),e.jsx("div",{className:"bg-muted/30 rounded-lg p-3",children:e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:g.content})})]})]},g.id))}),S===d.id&&h&&e.jsx("div",{className:"ml-13 space-y-3 border-l-2 border-muted pl-4",children:e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs(E,{className:"w-8 h-8",children:[e.jsx(z,{src:a.image}),e.jsx(J,{children:a.name.charAt(0)})]}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium",children:a.name}),r&&e.jsx(N,{variant:"default",className:"text-xs",children:"Host"})]}),e.jsx(X,{value:s[d.id]||"",onChange:g=>v(T=>({...T,[d.id]:g.target.value})),placeholder:"Write a reply...",rows:2}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(y,{variant:"outline",size:"sm",onClick:()=>P(null),children:"Cancel"}),e.jsx(y,{onClick:()=>n(d.id),disabled:!s[d.id]?.trim(),size:"sm",children:"Reply"})]})]})]})})]},d.id))})]})]})}function Os({currentUser:t=j[0],onBack:a=()=>{},onJoinJam:l=()=>{},onLeaveJam:o=()=>{},onAddSong:c=()=>{},onAddThread:r=()=>{},onAddReply:f=()=>{},onViewProfile:u=()=>{}}){const{id:w}=Ke(),{data:s,isLoading:v}=ms(w),[S,P]=m.useState(!1),[h,D]=m.useState({difficulty:"Medium"});if(v)return null;if(!s)return"No Jam found";const n=s.participants.some(i=>i.id===t.id),x=s.host.id===t.id,d=s.currentParticipants>=s.maxParticipants,g=s.maxParticipants-s.currentParticipants,T=()=>{h.title&&h.artist&&(c(s.id,{title:h.title,artist:h.artist,genre:h.genre||"",difficulty:h.difficulty||"Medium",duration:h.duration,key:h.key}),P(!1),D({difficulty:"Medium"}))},W=i=>{r(s.id,i)},O=(i,p)=>{f(s.id,i,p)},q=i=>new Date(i).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),G=i=>{const[p,Oe]=i.split(":"),re=new Date;return re.setHours(parseInt(p),parseInt(Oe)),re.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})};return e.jsxs("div",{className:"max-w-4xl mx-auto p-4 space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(xe,{to:"/jams",children:e.jsxs(y,{variant:"outline",size:"sm",onClick:a,children:[e.jsx(Ve,{className:"w-4 h-4 mr-2"}),"Back to Jams"]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(N,{variant:s.type==="open"?"default":"secondary",children:s.type==="open"?"Open Session":"Private Session"}),e.jsx(N,{variant:"outline",children:s.skillLevel})]})]}),e.jsxs(R,{children:[e.jsx(_,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(M,{className:"text-2xl",children:s.title}),e.jsxs("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[e.jsx(Y,{route:`/profiles/${s.host.id}`,src:s.host.image,fallback:s.host.name.charAt(0),className:"w-8 h-8",onClick:()=>u(s.host.id)}),e.jsxs("span",{children:["Hosted by"," ",e.jsx("button",{onClick:()=>u(s.host.id),className:"text-foreground hover:text-primary transition-colors underline",children:s.host.name})]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(y,{variant:"outline",size:"sm",children:[e.jsx(cs,{className:"w-4 h-4 mr-2"}),"Share"]}),e.jsxs(y,{variant:"outline",size:"sm",children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Message Host"]})]})]})}),e.jsxs(L,{className:"space-y-6",children:[e.jsx("p",{className:"text-muted-foreground",children:s.description}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ue,{className:"w-5 h-5 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:q(s.date)}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Date"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Xe,{className:"w-5 h-5 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:G(s.time)}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Time"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(he,{className:"w-5 h-5 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.location}),s.address&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s.address})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"mb-2",children:"Genres"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.genres.map(i=>e.jsx(N,{variant:"outline",children:i},i))})]}),s.notes&&e.jsxs("div",{children:[e.jsx("h4",{className:"mb-2",children:"Additional Notes"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.notes})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(R,{children:[e.jsx(_,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(M,{className:"flex items-center space-x-2",children:[e.jsx(V,{className:"w-5 h-5"}),e.jsxs("span",{children:["Participants (",s.currentParticipants,"/",s.maxParticipants,")"]})]}),!d&&!n&&e.jsxs(y,{size:"sm",onClick:()=>l(s),children:[e.jsx(Ue,{className:"w-4 h-4 mr-2"}),"Join"]}),n&&!x&&e.jsx(y,{size:"sm",variant:"outline",onClick:()=>o(s),children:"Leave"})]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-primary/10 rounded-lg cursor-pointer hover:bg-primary/15 transition-colors",onClick:()=>u(s.host.id),children:[e.jsx(Y,{route:`/profiles/${s.host.id}`,src:s.host.image,fallback:s.host.name.charAt(0),className:"w-10 h-10",onClick:()=>u(s.host.id)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium hover:text-primary",children:s.host.name}),e.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[s.host.instruments?.map(i=>e.jsx(N,{variant:"secondary",className:"text-xs",children:i},i)),e.jsx(N,{className:"text-xs",children:"Host"})]})]})]}),s.participants.map(i=>e.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-muted/50 cursor-pointer transition-colors",onClick:()=>u(i.id),children:[e.jsx(Y,{route:`/profiles/${i.id}`,src:i.image,fallback:i.name.charAt(0),className:"w-10 h-10",onClick:()=>u(i.id)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium hover:text-primary",children:i.name}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:i?.instruments?.map(p=>e.jsx(N,{variant:"secondary",className:"text-xs",children:p},p))})]})]},i.id)),s.neededInstruments.length>0&&e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("h5",{className:"text-sm font-medium mb-2",children:"Still Looking For:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:s.neededInstruments.map(i=>e.jsx(N,{variant:"outline",className:"text-xs",children:i},i))})]}),g>0&&e.jsx("div",{className:"text-center p-3 bg-muted/50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:[g," ",g===1?"spot":"spots"," remaining"]})})]})]}),e.jsxs(R,{children:[e.jsx(_,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(M,{className:"flex items-center space-x-2",children:[e.jsx(me,{className:"w-5 h-5"}),e.jsxs("span",{children:["Setlist (",s.setlist.length," songs)"]})]}),(n||x)&&e.jsxs(Te,{open:S,onOpenChange:P,children:[e.jsx(_e,{asChild:!0,children:e.jsxs(y,{size:"sm",variant:"outline",children:[e.jsx(ee,{className:"w-4 h-4 mr-2"}),"Add Song"]})}),e.jsxs(Me,{children:[e.jsx(Le,{children:e.jsx(Fe,{children:"Add Song to Setlist"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"song-title",children:"Song Title"}),e.jsx(C,{id:"song-title",value:h.title||"",onChange:i=>D(p=>({...p,title:i.target.value})),placeholder:"Song name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"song-artist",children:"Artist"}),e.jsx(C,{id:"song-artist",value:h.artist||"",onChange:i=>D(p=>({...p,artist:i.target.value})),placeholder:"Artist name"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"song-key",children:"Key"}),e.jsx(C,{id:"song-key",value:h.key||"",onChange:i=>D(p=>({...p,key:i.target.value})),placeholder:"C, Dm, etc."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"song-genre",children:"Genre"}),e.jsx(C,{id:"song-genre",value:h.genre||"",onChange:i=>D(p=>({...p,genre:i.target.value})),placeholder:"Rock, Jazz, etc."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"song-duration",children:"Duration (min)"}),e.jsx(C,{id:"song-duration",type:"number",value:h.duration||"",onChange:i=>D(p=>({...p,duration:parseInt(i.target.value)})),placeholder:"4"})]})]}),e.jsx(y,{onClick:T,className:"w-full",children:"Add to Setlist"})]})]})]})]})}),e.jsx(L,{children:s.setlist.length===0?e.jsxs("div",{className:"text-center p-6 text-muted-foreground",children:[e.jsx(me,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No songs in the setlist yet"}),e.jsx("p",{className:"text-sm",children:"Be the first to suggest a song!"})]}):e.jsxs("div",{className:"space-y-3",children:[s.setlist.map((i,p)=>e.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg border",children:[e.jsx("div",{className:"w-8 h-8 bg-primary/20 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium",children:p+1})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:i.title}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["by ",i.artist,i.key&&` • Key: ${i.key}`,i.duration&&` • ${i.duration}min`]})]}),e.jsxs("div",{className:"flex flex-col items-end space-y-1",children:[e.jsx(N,{variant:"outline",className:"text-xs",children:i.difficulty}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["by ",i.suggestedBy]})]})]},i.id)),e.jsxs("div",{className:"text-center pt-2 text-sm text-muted-foreground",children:["Total duration: ",s.setlist.reduce((i,p)=>i+(p.duration||0),0)," ","minutes"]})]})})]})]}),(s.equipment||s.price)&&e.jsxs(R,{children:[e.jsx(_,{children:e.jsx(M,{children:"Additional Information"})}),e.jsxs(L,{className:"space-y-4",children:[s.equipment&&e.jsxs("div",{children:[e.jsx("h4",{className:"mb-2",children:"Available Equipment"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.equipment.map(i=>e.jsx(N,{variant:"secondary",children:i},i))})]}),s.price&&e.jsxs("div",{children:[e.jsx("h4",{className:"mb-2",children:"Cost"}),e.jsxs("p",{className:"text-lg font-medium",children:["$",s.price," per person"]})]})]})]}),e.jsx(Is,{jamId:s.id,currentUser:t,threads:s.discussion||[],onAddThread:W,onAddReply:O,isHost:x,isParticipant:n})]})}const Ts=()=>ge,_s=t=>pe({queryKey:["jams"],queryFn:()=>Ts(),...t});function Es({onCreateJam:t=()=>{}}){const[a,l]=m.useState(""),[o,c]=m.useState(""),[r,f]=m.useState(""),[u,w]=m.useState(!1),[s,v]=m.useState({genres:[],type:"open",maxParticipants:4}),{data:S,isLoading:P}=_s();if(P)return null;if(!S)return"No jam sessions found";const h=S.filter(n=>{const x=n.title.toLowerCase().includes(a.toLowerCase())||n.description.toLowerCase().includes(a.toLowerCase()),d=!o||n.genres.includes(o),g=!r||n.date===r;return x&&d&&g}),D=()=>{s.title&&s.date&&s.time&&s.location&&(t({title:s.title,description:s.description||"",date:s.date,time:s.time,location:s.location,maxParticipants:s.maxParticipants||4,currentParticipants:1,genres:s.genres||[],skillLevel:s.skillLevel||"All Levels",type:s.type||"open",setlist:[],neededInstruments:[]}),w(!1),v({genres:[],type:"open",maxParticipants:4}))};return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl mb-2",children:"Jams"}),e.jsx("p",{children:"Discover Jam Sessions"})]}),e.jsxs(Te,{open:u,onOpenChange:w,children:[e.jsx(_e,{asChild:!0,children:e.jsxs(y,{children:[e.jsx(ee,{className:"w-4 h-4 mr-2"}),"Create Jam"]})}),e.jsxs(Me,{className:"max-w-md",children:[e.jsx(Le,{children:e.jsx(Fe,{children:"Create New Jam Session"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"jam-title",children:"Session Title"}),e.jsx(C,{id:"jam-title",value:s.title||"",onChange:n=>v(x=>({...x,title:n.target.value})),placeholder:"Sunday Jazz Jam"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"jam-description",children:"Description"}),e.jsx(X,{id:"jam-description",value:s.description||"",onChange:n=>v(x=>({...x,description:n.target.value})),placeholder:"Tell musicians what to expect...",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"jam-date",children:"Date"}),e.jsx(C,{id:"jam-date",type:"date",value:s.date||"",onChange:n=>v(x=>({...x,date:n.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"jam-time",children:"Time"}),e.jsx(C,{id:"jam-time",type:"time",value:s.time||"",onChange:n=>v(x=>({...x,time:n.target.value}))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"jam-location",children:"Location"}),e.jsx(C,{id:"jam-location",value:s.location||"",onChange:n=>v(x=>({...x,location:n.target.value})),placeholder:"Venue name and address"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"jam-participants",children:"Max Participants"}),e.jsx(C,{id:"jam-participants",type:"number",min:"2",max:"20",value:s.maxParticipants||4,onChange:n=>v(x=>({...x,maxParticipants:parseInt(n.target.value)}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"jam-skill",children:"Skill Level"}),e.jsxs(le,{value:s.skillLevel,onValueChange:n=>v(x=>({...x,skillLevel:n})),children:[e.jsx(oe,{children:e.jsx(ce,{placeholder:"All Levels"})}),e.jsxs(de,{children:[e.jsx(A,{value:"All Levels",children:"All Levels"}),e.jsx(A,{value:"Beginner",children:"Beginner"}),e.jsx(A,{value:"Intermediate",children:"Intermediate"}),e.jsx(A,{value:"Advanced",children:"Advanced"})]})]})]})]}),e.jsx(y,{onClick:D,className:"w-full",children:"Create Jam Session"})]})]})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Qe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(C,{placeholder:"Search jam sessions...",value:a,onChange:n=>l(n.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(le,{value:o||"all",onValueChange:n=>c(n==="all"?"":n),children:[e.jsx(oe,{className:"w-[140px]",children:e.jsx(ce,{placeholder:"All Genres"})}),e.jsxs(de,{children:[e.jsx(A,{value:"all",children:"All Genres"}),e.jsx(A,{value:"Jazz",children:"Jazz"}),e.jsx(A,{value:"Rock",children:"Rock"}),e.jsx(A,{value:"Folk",children:"Folk"}),e.jsx(A,{value:"Blues",children:"Blues"}),e.jsx(A,{value:"Indie",children:"Indie"})]})]}),e.jsx(C,{type:"date",value:r,onChange:n=>f(n.target.value),className:"w-[160px]"})]})]})]}),e.jsxs("div",{className:"grid gap-4",children:[h.map(n=>e.jsx(xe,{to:`/jams/${n.id}`,className:"block",children:e.jsxs(R,{className:"hover:shadow-md transition-shadow cursor-pointer",children:[e.jsx(_,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(M,{className:"text-lg",children:n.title}),e.jsx(ss,{className:"w-5 h-5 text-muted-foreground"})]}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground mt-1",children:[e.jsxs(E,{className:"w-6 h-6 mr-2",children:[e.jsx(z,{src:n.host.image}),e.jsx(J,{className:"text-xs",children:n.host.name.charAt(0)})]}),"Hosted by ",n.host.name]})]}),e.jsx(N,{variant:n.type==="open"?"default":"secondary",children:n.type==="open"?"Open":"Private"})]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:n.description}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ue,{className:"w-4 h-4 mr-1"}),new Date(n.date).toLocaleDateString()," at ",n.time]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(he,{className:"w-4 h-4 mr-1"}),n.location]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(V,{className:"w-4 h-4 mr-1"}),n.currentParticipants,"/",n.maxParticipants," participants"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[n.genres.map(x=>e.jsx(N,{variant:"outline",className:"text-xs",children:x},x)),e.jsx(N,{variant:"secondary",className:"text-xs",children:n.skillLevel})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[n.maxParticipants-n.currentParticipants," spots left",n.setlist.length>0&&` • ${n.setlist.length} songs planned`]}),e.jsx(y,{onClick:x=>{x.stopPropagation()},disabled:n.currentParticipants>=n.maxParticipants,size:"sm",children:n.currentParticipants>=n.maxParticipants?"Full":"Join"})]})]})]})},n.id)),h.length===0&&e.jsxs(R,{className:"p-8 text-center",children:[e.jsx(V,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"mb-2",children:"No jam sessions found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Try adjusting your search filters or create a new jam session."}),e.jsxs(y,{onClick:()=>w(!0),children:[e.jsx(ee,{className:"w-4 h-4 mr-2"}),"Create Your First Jam"]})]})]})]})}export{Os as JamDetails,Es as JamDiscovery};
