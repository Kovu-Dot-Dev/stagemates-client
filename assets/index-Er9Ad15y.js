import{c as O,p as ce,r as m,q as Fe,j as e,s as Me,t as H,v as X,P as $,w as L,x as Z,y as Oe,z as Ee,R as Le,A as $e,D as Je,F as ze,E as qe,G as Ge,a as B,C as P,e as T,f as F,b as M,d as v,B as N,u as Be,m as We,L as oe,g as de,M as me,U as K,I as C,i as te,k as ne,l as ie,n as le,o as k,S as He}from"./index-LHUd2BJs.js";import{u as xe,X as Ke,d as R,T as Y,A as Ye,C as Qe,U as Ve,M as re,L as w,a as Xe,b as Ze,c as Ue}from"./Textarea-B9gU0x4k.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ss=O("chevron-right",es);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Q=O("message-circle",as);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],V=O("plus",ts);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=[["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}],["path",{d:"m9 17-5-5 5-5",key:"nvlc11"}]],is=O("reply",ns);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],rs=O("send",ls);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],os=O("share-2",cs),ds=a=>{if(!a)throw new Error("id is required");return ce.find(t=>t.id===a)},ms=(a,t)=>xe({queryKey:["jam",a],queryFn:()=>ds(a),enabled:!!a,...t});var W="Dialog",[ue]=Me(W),[xs,D]=ue(W),he=a=>{const{__scopeDialog:t,children:r,open:c,defaultOpen:o,onOpenChange:l,modal:j=!0}=a,u=m.useRef(null),y=m.useRef(null),[s,f]=Fe({prop:c,defaultProp:o??!1,onChange:l,caller:W});return e.jsx(xs,{scope:t,triggerRef:u,contentRef:y,contentId:H(),titleId:H(),descriptionId:H(),open:s,onOpenChange:f,onOpenToggle:m.useCallback(()=>f(S=>!S),[f]),modal:j,children:r})};he.displayName=W;var pe="DialogTrigger",ge=m.forwardRef((a,t)=>{const{__scopeDialog:r,...c}=a,o=D(pe,r),l=X(t,o.triggerRef);return e.jsx($.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":se(o.open),...c,ref:l,onClick:L(a.onClick,o.onOpenToggle)})});ge.displayName=pe;var U="DialogPortal",[us,je]=ue(U,{forceMount:void 0}),fe=a=>{const{__scopeDialog:t,forceMount:r,children:c,container:o}=a,l=D(U,t);return e.jsx(us,{scope:t,forceMount:r,children:m.Children.map(c,j=>e.jsx(Z,{present:r||l.open,children:e.jsx(Oe,{asChild:!0,container:o,children:j})}))})};fe.displayName=U;var G="DialogOverlay",ve=m.forwardRef((a,t)=>{const r=je(G,a.__scopeDialog),{forceMount:c=r.forceMount,...o}=a,l=D(G,a.__scopeDialog);return l.modal?e.jsx(Z,{present:c||l.open,children:e.jsx(ps,{...o,ref:t})}):null});ve.displayName=G;var hs=$e("DialogOverlay.RemoveScroll"),ps=m.forwardRef((a,t)=>{const{__scopeDialog:r,...c}=a,o=D(G,r);return e.jsx(Le,{as:hs,allowPinchZoom:!0,shards:[o.contentRef],children:e.jsx($.div,{"data-state":se(o.open),...c,ref:t,style:{pointerEvents:"auto",...c.style}})})}),_="DialogContent",Ne=m.forwardRef((a,t)=>{const r=je(_,a.__scopeDialog),{forceMount:c=r.forceMount,...o}=a,l=D(_,a.__scopeDialog);return e.jsx(Z,{present:c||l.open,children:l.modal?e.jsx(gs,{...o,ref:t}):e.jsx(js,{...o,ref:t})})});Ne.displayName=_;var gs=m.forwardRef((a,t)=>{const r=D(_,a.__scopeDialog),c=m.useRef(null),o=X(t,r.contentRef,c);return m.useEffect(()=>{const l=c.current;if(l)return Ee(l)},[]),e.jsx(ye,{...a,ref:o,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:L(a.onCloseAutoFocus,l=>{l.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:L(a.onPointerDownOutside,l=>{const j=l.detail.originalEvent,u=j.button===0&&j.ctrlKey===!0;(j.button===2||u)&&l.preventDefault()}),onFocusOutside:L(a.onFocusOutside,l=>l.preventDefault())})}),js=m.forwardRef((a,t)=>{const r=D(_,a.__scopeDialog),c=m.useRef(!1),o=m.useRef(!1);return e.jsx(ye,{...a,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:l=>{a.onCloseAutoFocus?.(l),l.defaultPrevented||(c.current||r.triggerRef.current?.focus(),l.preventDefault()),c.current=!1,o.current=!1},onInteractOutside:l=>{a.onInteractOutside?.(l),l.defaultPrevented||(c.current=!0,l.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const j=l.target;r.triggerRef.current?.contains(j)&&l.preventDefault(),l.detail.originalEvent.type==="focusin"&&o.current&&l.preventDefault()}})}),ye=m.forwardRef((a,t)=>{const{__scopeDialog:r,trapFocus:c,onOpenAutoFocus:o,onCloseAutoFocus:l,...j}=a,u=D(_,r),y=m.useRef(null),s=X(t,y);return Je(),e.jsxs(e.Fragment,{children:[e.jsx(ze,{asChild:!0,loop:!0,trapped:c,onMountAutoFocus:o,onUnmountAutoFocus:l,children:e.jsx(qe,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":se(u.open),...j,ref:s,onDismiss:()=>u.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(vs,{titleId:u.titleId}),e.jsx(ys,{contentRef:y,descriptionId:u.descriptionId})]})]})}),ee="DialogTitle",Ce=m.forwardRef((a,t)=>{const{__scopeDialog:r,...c}=a,o=D(ee,r);return e.jsx($.h2,{id:o.titleId,...c,ref:t})});Ce.displayName=ee;var we="DialogDescription",fs=m.forwardRef((a,t)=>{const{__scopeDialog:r,...c}=a,o=D(we,r);return e.jsx($.p,{id:o.descriptionId,...c,ref:t})});fs.displayName=we;var De="DialogClose",be=m.forwardRef((a,t)=>{const{__scopeDialog:r,...c}=a,o=D(De,r);return e.jsx($.button,{type:"button",...c,ref:t,onClick:L(a.onClick,()=>o.onOpenChange(!1))})});be.displayName=De;function se(a){return a?"open":"closed"}var ke="DialogTitleWarning",[Os,Se]=Ge(ke,{contentName:_,titleName:ee,docsSlug:"dialog"}),vs=({titleId:a})=>{const t=Se(ke),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return m.useEffect(()=>{a&&(document.getElementById(a)||console.error(r))},[r,a]),null},Ns="DialogDescriptionWarning",ys=({contentRef:a,descriptionId:t})=>{const c=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Se(Ns).contentName}}.`;return m.useEffect(()=>{const o=a.current?.getAttribute("aria-describedby");t&&o&&(document.getElementById(t)||console.warn(c))},[c,a,t]),null},Cs=he,ws=ge,Ds=fe,bs=ve,ks=Ne,Ss=Ce,As=be;function Ae({...a}){return e.jsx(Cs,{"data-slot":"dialog",...a})}function Pe({...a}){return e.jsx(ws,{"data-slot":"dialog-trigger",...a})}function Ps({...a}){return e.jsx(Ds,{"data-slot":"dialog-portal",...a})}function Rs({className:a,...t}){return e.jsx(bs,{"data-slot":"dialog-overlay",className:B("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...t})}function Re({className:a,children:t,showCloseButton:r=!0,...c}){return e.jsxs(Ps,{"data-slot":"dialog-portal",children:[e.jsx(Rs,{}),e.jsxs(ks,{"data-slot":"dialog-content",className:B("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...c,children:[t,r&&e.jsxs(As,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[e.jsx(Ke,{}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function _e({className:a,...t}){return e.jsx("div",{"data-slot":"dialog-header",className:B("flex flex-col gap-2 text-center sm:text-left",a),...t})}function Ie({className:a,...t}){return e.jsx(Ss,{"data-slot":"dialog-title",className:B("text-lg leading-none font-semibold",a),...t})}function _s({jamId:a,currentUser:t,threads:r,onAddThread:c,onAddReply:o,isHost:l,isParticipant:j}){const[u,y]=m.useState(""),[s,f]=m.useState({}),[S,A]=m.useState(null),h=l||j,b=()=>{u.trim()&&h&&(c(u.trim()),y(""))},n=d=>{const p=s[d];p?.trim()&&h&&(o(d,p.trim()),f(I=>({...I,[d]:""})),A(null))},x=d=>{const p=new Date(d),J=new Date().getTime()-p.getTime(),E=Math.floor(J/(1e3*60*60)),z=Math.floor(E/24);if(z>0)return`${z}d ago`;if(E>0)return`${E}h ago`;{const q=Math.floor(J/6e4);return q>0?`${q}m ago`:"Just now"}};return e.jsxs(P,{children:[e.jsxs(T,{children:[e.jsxs(F,{className:"flex items-center space-x-2",children:[e.jsx(Q,{className:"w-5 h-5"}),e.jsxs("span",{children:["Discussion (",r.length,")"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Open discussion for all participants - ask questions, share updates, and coordinate details"})]}),e.jsxs(M,{className:"space-y-6",children:[h&&e.jsxs("div",{className:"space-y-3 p-4 bg-muted/30 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{route:`/profiles/${t.id}`,src:t.image,fallback:t.name.charAt(0),className:"w-10 h-10"}),e.jsx("span",{className:"font-medium",children:t.name}),l&&e.jsx(v,{variant:"default",className:"text-xs",children:"Host"})]}),e.jsx(Y,{value:u,onChange:d=>y(d.target.value),placeholder:"Start a discussion, ask a question, or share an update...",rows:3}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(N,{onClick:b,disabled:!u.trim(),size:"sm",children:[e.jsx(rs,{className:"w-4 h-4 mr-2"}),"Post"]})})]}),!h&&e.jsx("div",{className:"p-4 bg-muted/30 rounded-lg text-center",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Join this jam session to participate in the discussion"})}),e.jsx("div",{className:"space-y-6",children:r.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Q,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No discussions yet"}),e.jsx("p",{className:"text-sm",children:"Be the first to start a conversation!"})]}):r.map(d=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(R,{route:`/profiles/${d.author.id}`,src:d.author.image,fallback:d.author.name.charAt(0),className:"w-10 h-10"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium",children:d.author.name}),d.author.id===t.id&&e.jsx(v,{variant:"outline",className:"text-xs",children:"You"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:x(d.timestamp)})]}),e.jsx("div",{className:"bg-muted/50 rounded-lg p-3",children:e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:d.content})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[h&&e.jsxs(N,{variant:"ghost",size:"sm",onClick:()=>A(S===d.id?null:d.id),children:[e.jsx(is,{className:"w-4 h-4 mr-1"}),"Reply"]}),d.replies.length>0&&e.jsxs("span",{className:"text-sm text-muted-foreground",children:[d.replies.length," ",d.replies.length===1?"reply":"replies"]})]})]})]}),d.replies.length>0&&e.jsx("div",{className:"ml-13 space-y-3 border-l-2 border-muted pl-4",children:d.replies.map(p=>e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(R,{route:`/profiles/${p.author.id}`,src:p.author.image,fallback:p.author.name.charAt(0),className:"w-8 h-8"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium",children:p.author.name}),p.author.id===t.id&&e.jsx(v,{variant:"outline",className:"text-xs",children:"You"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:x(p.timestamp)})]}),e.jsx("div",{className:"bg-muted/30 rounded-lg p-3",children:e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:p.content})})]})]},p.id))}),S===d.id&&h&&e.jsx("div",{className:"ml-13 space-y-3 border-l-2 border-muted pl-4",children:e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(R,{route:`/profiles/${t.id}`,src:t.image,fallback:t.name.charAt(0),className:"w-10 h-10"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium",children:t.name}),l&&e.jsx(v,{variant:"default",className:"text-xs",children:"Host"})]}),e.jsx(Y,{value:s[d.id]||"",onChange:p=>f(I=>({...I,[d.id]:p.target.value})),placeholder:"Write a reply...",rows:2}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(N,{variant:"outline",size:"sm",onClick:()=>A(null),children:"Cancel"}),e.jsx(N,{onClick:()=>n(d.id),disabled:!s[d.id]?.trim(),size:"sm",children:"Reply"})]})]})]})})]},d.id))})]})]})}function Es({currentUser:a=We[0],onBack:t=()=>{},onJoinJam:r=()=>{},onLeaveJam:c=()=>{},onAddSong:o=()=>{},onAddThread:l=()=>{},onAddReply:j=()=>{},onViewProfile:u=()=>{}}){const{id:y}=Be(),{data:s,isLoading:f}=ms(y),[S,A]=m.useState(!1),[h,b]=m.useState({difficulty:"Medium"});if(f)return null;if(!s)return"No Jam found";const n=s.participants.some(i=>i.id===a.id),x=s.host.id===a.id,d=s.currentParticipants>=s.maxParticipants,p=s.maxParticipants-s.currentParticipants,I=()=>{h.title&&h.artist&&(o(s.id,{title:h.title,artist:h.artist,genre:h.genre||"",difficulty:h.difficulty||"Medium",duration:h.duration,key:h.key}),A(!1),b({difficulty:"Medium"}))},J=i=>{l(s.id,i)},E=(i,g)=>{j(s.id,i,g)},z=i=>new Date(i).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),q=i=>{const[g,Te]=i.split(":"),ae=new Date;return ae.setHours(parseInt(g),parseInt(Te)),ae.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})};return e.jsxs("div",{className:"max-w-4xl mx-auto p-4 space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(oe,{to:"/jams",children:e.jsxs(N,{variant:"outline",size:"sm",onClick:t,children:[e.jsx(Ye,{className:"w-4 h-4 mr-2"}),"Back to Jams"]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(v,{variant:s.type==="open"?"default":"secondary",children:s.type==="open"?"Open Session":"Private Session"}),e.jsx(v,{variant:"outline",children:s.skillLevel})]})]}),e.jsxs(P,{children:[e.jsx(T,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{className:"text-2xl",children:s.title}),e.jsxs("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[e.jsx(R,{route:"/profiles/u1",src:s.host.image,fallback:s.host.name.charAt(0),className:"w-8 h-8",onClick:()=>u(s.host.id)}),e.jsxs("span",{children:["Hosted by"," ",e.jsx("button",{onClick:()=>u(s.host.id),className:"text-foreground hover:text-primary transition-colors underline",children:s.host.name})]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(N,{variant:"outline",size:"sm",children:[e.jsx(os,{className:"w-4 h-4 mr-2"}),"Share"]}),e.jsxs(N,{variant:"outline",size:"sm",children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),"Message Host"]})]})]})}),e.jsxs(M,{className:"space-y-6",children:[e.jsx("p",{className:"text-muted-foreground",children:s.description}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(de,{className:"w-5 h-5 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:z(s.date)}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Date"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Qe,{className:"w-5 h-5 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:q(s.time)}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Time"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(me,{className:"w-5 h-5 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.location}),s.address&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s.address})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"mb-2",children:"Genres"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.genres.map(i=>e.jsx(v,{variant:"outline",children:i},i))})]}),s.notes&&e.jsxs("div",{children:[e.jsx("h4",{className:"mb-2",children:"Additional Notes"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.notes})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(P,{children:[e.jsx(T,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(F,{className:"flex items-center space-x-2",children:[e.jsx(K,{className:"w-5 h-5"}),e.jsxs("span",{children:["Participants (",s.currentParticipants,"/",s.maxParticipants,")"]})]}),!d&&!n&&e.jsxs(N,{size:"sm",onClick:()=>r(s),children:[e.jsx(Ve,{className:"w-4 h-4 mr-2"}),"Join"]}),n&&!x&&e.jsx(N,{size:"sm",variant:"outline",onClick:()=>c(s),children:"Leave"})]})}),e.jsxs(M,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-primary/10 rounded-lg cursor-pointer hover:bg-primary/15 transition-colors",onClick:()=>u(s.host.id),children:[e.jsx(R,{route:`/profiles/${s.host.id}`,src:s.host.image,fallback:s.host.name.charAt(0),className:"w-10 h-10",onClick:()=>u(s.host.id)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium hover:text-primary",children:s.host.name}),e.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[s.host.instruments?.map(i=>e.jsx(v,{variant:"secondary",className:"text-xs",children:i},i)),e.jsx(v,{className:"text-xs",children:"Host"})]})]})]}),s.participants.map(i=>e.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-muted/50 cursor-pointer transition-colors",onClick:()=>u(i.id),children:[e.jsx(R,{route:`/profiles/${i.id}`,src:i.image,fallback:i.name.charAt(0),className:"w-10 h-10",onClick:()=>u(i.id)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium hover:text-primary",children:i.name}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:i?.instruments?.map(g=>e.jsx(v,{variant:"secondary",className:"text-xs",children:g},g))})]})]},i.id)),s.neededInstruments.length>0&&e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("h5",{className:"text-sm font-medium mb-2",children:"Still Looking For:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:s.neededInstruments.map(i=>e.jsx(v,{variant:"outline",className:"text-xs",children:i},i))})]}),p>0&&e.jsx("div",{className:"text-center p-3 bg-muted/50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:[p," ",p===1?"spot":"spots"," remaining"]})})]})]}),e.jsxs(P,{children:[e.jsx(T,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(F,{className:"flex items-center space-x-2",children:[e.jsx(re,{className:"w-5 h-5"}),e.jsxs("span",{children:["Setlist (",s.setlist.length," songs)"]})]}),(n||x)&&e.jsxs(Ae,{open:S,onOpenChange:A,children:[e.jsx(Pe,{asChild:!0,children:e.jsxs(N,{size:"sm",variant:"outline",children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),"Add Song"]})}),e.jsxs(Re,{children:[e.jsx(_e,{children:e.jsx(Ie,{children:"Add Song to Setlist"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"song-title",children:"Song Title"}),e.jsx(C,{id:"song-title",value:h.title||"",onChange:i=>b(g=>({...g,title:i.target.value})),placeholder:"Song name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"song-artist",children:"Artist"}),e.jsx(C,{id:"song-artist",value:h.artist||"",onChange:i=>b(g=>({...g,artist:i.target.value})),placeholder:"Artist name"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"song-key",children:"Key"}),e.jsx(C,{id:"song-key",value:h.key||"",onChange:i=>b(g=>({...g,key:i.target.value})),placeholder:"C, Dm, etc."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"song-genre",children:"Genre"}),e.jsx(C,{id:"song-genre",value:h.genre||"",onChange:i=>b(g=>({...g,genre:i.target.value})),placeholder:"Rock, Jazz, etc."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"song-duration",children:"Duration (min)"}),e.jsx(C,{id:"song-duration",type:"number",value:h.duration||"",onChange:i=>b(g=>({...g,duration:parseInt(i.target.value)})),placeholder:"4"})]})]}),e.jsx(N,{onClick:I,className:"w-full",children:"Add to Setlist"})]})]})]})]})}),e.jsx(M,{children:s.setlist.length===0?e.jsxs("div",{className:"text-center p-6 text-muted-foreground",children:[e.jsx(re,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No songs in the setlist yet"}),e.jsx("p",{className:"text-sm",children:"Be the first to suggest a song!"})]}):e.jsxs("div",{className:"space-y-3",children:[s.setlist.map((i,g)=>e.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg border",children:[e.jsx("div",{className:"w-8 h-8 bg-primary/20 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium",children:g+1})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:i.title}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["by ",i.artist,i.key&&` • Key: ${i.key}`,i.duration&&` • ${i.duration}min`]})]}),e.jsxs("div",{className:"flex flex-col items-end space-y-1",children:[e.jsx(v,{variant:"outline",className:"text-xs",children:i.difficulty}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["by ",i.suggestedBy]})]})]},i.id)),e.jsxs("div",{className:"text-center pt-2 text-sm text-muted-foreground",children:["Total duration: ",s.setlist.reduce((i,g)=>i+(g.duration||0),0)," ","minutes"]})]})})]})]}),(s.equipment||s.price)&&e.jsxs(P,{children:[e.jsx(T,{children:e.jsx(F,{children:"Additional Information"})}),e.jsxs(M,{className:"space-y-4",children:[s.equipment&&e.jsxs("div",{children:[e.jsx("h4",{className:"mb-2",children:"Available Equipment"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.equipment.map(i=>e.jsx(v,{variant:"secondary",children:i},i))})]}),s.price&&e.jsxs("div",{children:[e.jsx("h4",{className:"mb-2",children:"Cost"}),e.jsxs("p",{className:"text-lg font-medium",children:["$",s.price," per person"]})]})]})]}),e.jsx(_s,{jamId:s.id,currentUser:a,threads:s.discussion||[],onAddThread:J,onAddReply:E,isHost:x,isParticipant:n})]})}const Is=()=>ce,Ts=a=>xe({queryKey:["jams"],queryFn:()=>Is(),...a});function Ls({onCreateJam:a=()=>{}}){const[t,r]=m.useState(""),[c,o]=m.useState(""),[l,j]=m.useState(""),[u,y]=m.useState(!1),[s,f]=m.useState({genres:[],type:"open",maxParticipants:4}),{data:S,isLoading:A}=Ts();if(A)return null;if(!S)return"No jam sessions found";const h=S.filter(n=>{const x=n.title.toLowerCase().includes(t.toLowerCase())||n.description.toLowerCase().includes(t.toLowerCase()),d=!c||n.genres.includes(c),p=!l||n.date===l;return x&&d&&p}),b=()=>{s.title&&s.date&&s.time&&s.location&&(a({title:s.title,description:s.description||"",date:s.date,time:s.time,location:s.location,maxParticipants:s.maxParticipants||4,currentParticipants:1,genres:s.genres||[],skillLevel:s.skillLevel||"All Levels",type:s.type||"open",setlist:[],neededInstruments:[]}),y(!1),f({genres:[],type:"open",maxParticipants:4}))};return e.jsxs("div",{className:"max-w-5xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl mb-2",children:"Jams"}),e.jsx("p",{children:"Discover Jam Sessions"})]}),e.jsxs(Ae,{open:u,onOpenChange:y,children:[e.jsx(Pe,{asChild:!0,children:e.jsxs(N,{children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),"Create Jam"]})}),e.jsxs(Re,{className:"max-w-md",children:[e.jsx(_e,{children:e.jsx(Ie,{children:"Create New Jam Session"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"jam-title",children:"Session Title"}),e.jsx(C,{id:"jam-title",value:s.title||"",onChange:n=>f(x=>({...x,title:n.target.value})),placeholder:"Sunday Jazz Jam"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"jam-description",children:"Description"}),e.jsx(Y,{id:"jam-description",value:s.description||"",onChange:n=>f(x=>({...x,description:n.target.value})),placeholder:"Tell musicians what to expect...",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"jam-date",children:"Date"}),e.jsx(C,{id:"jam-date",type:"date",value:s.date||"",onChange:n=>f(x=>({...x,date:n.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"jam-time",children:"Time"}),e.jsx(C,{id:"jam-time",type:"time",value:s.time||"",onChange:n=>f(x=>({...x,time:n.target.value}))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"jam-location",children:"Location"}),e.jsx(C,{id:"jam-location",value:s.location||"",onChange:n=>f(x=>({...x,location:n.target.value})),placeholder:"Venue name and address"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"jam-participants",children:"Max Participants"}),e.jsx(C,{id:"jam-participants",type:"number",min:"2",max:"20",value:s.maxParticipants||4,onChange:n=>f(x=>({...x,maxParticipants:parseInt(n.target.value)}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"jam-skill",children:"Skill Level"}),e.jsxs(te,{value:s.skillLevel,onValueChange:n=>f(x=>({...x,skillLevel:n})),children:[e.jsx(ne,{children:e.jsx(ie,{placeholder:"All Levels"})}),e.jsxs(le,{children:[e.jsx(k,{value:"All Levels",children:"All Levels"}),e.jsx(k,{value:"Beginner",children:"Beginner"}),e.jsx(k,{value:"Intermediate",children:"Intermediate"}),e.jsx(k,{value:"Advanced",children:"Advanced"})]})]})]})]}),e.jsx(N,{onClick:b,className:"w-full",children:"Create Jam Session"})]})]})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(He,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(C,{placeholder:"Search jam sessions...",value:t,onChange:n=>r(n.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(te,{value:c||"all",onValueChange:n=>o(n==="all"?"":n),children:[e.jsx(ne,{className:"w-[140px]",children:e.jsx(ie,{placeholder:"All Genres"})}),e.jsxs(le,{children:[e.jsx(k,{value:"all",children:"All Genres"}),e.jsx(k,{value:"Jazz",children:"Jazz"}),e.jsx(k,{value:"Rock",children:"Rock"}),e.jsx(k,{value:"Folk",children:"Folk"}),e.jsx(k,{value:"Blues",children:"Blues"}),e.jsx(k,{value:"Indie",children:"Indie"})]})]}),e.jsx(C,{type:"date",value:l,onChange:n=>j(n.target.value),className:"w-[160px]"})]})]})]}),e.jsxs("div",{className:"grid gap-4",children:[h.map(n=>e.jsx(oe,{to:`/jams/${n.id}`,className:"block",children:e.jsxs(P,{className:"hover:shadow-md transition-shadow cursor-pointer",children:[e.jsx(T,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(F,{className:"text-lg",children:n.title}),e.jsx(ss,{className:"w-5 h-5 text-muted-foreground"})]}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground mt-1",children:[e.jsxs(Xe,{className:"w-6 h-6 mr-2",children:[e.jsx(Ze,{src:n.host.image}),e.jsx(Ue,{className:"text-xs",children:n.host.name.charAt(0)})]}),"Hosted by ",n.host.name]})]}),e.jsx(v,{variant:n.type==="open"?"default":"secondary",children:n.type==="open"?"Open":"Private"})]})}),e.jsxs(M,{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:n.description}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(de,{className:"w-4 h-4 mr-1"}),new Date(n.date).toLocaleDateString()," at ",n.time]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(me,{className:"w-4 h-4 mr-1"}),n.location]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(K,{className:"w-4 h-4 mr-1"}),n.currentParticipants,"/",n.maxParticipants," participants"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[n.genres.map(x=>e.jsx(v,{variant:"outline",className:"text-xs",children:x},x)),e.jsx(v,{variant:"secondary",className:"text-xs",children:n.skillLevel})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[n.maxParticipants-n.currentParticipants," spots left",n.setlist.length>0&&` • ${n.setlist.length} songs planned`]}),e.jsx(N,{onClick:x=>{x.stopPropagation()},disabled:n.currentParticipants>=n.maxParticipants,size:"sm",children:n.currentParticipants>=n.maxParticipants?"Full":"Join"})]})]})]})},n.id)),h.length===0&&e.jsxs(P,{className:"p-8 text-center",children:[e.jsx(K,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"mb-2",children:"No jam sessions found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Try adjusting your search filters or create a new jam session."}),e.jsxs(N,{onClick:()=>y(!0),children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),"Create Your First Jam"]})]})]})]})}export{Es as JamDetails,Ls as JamDiscovery};
